<div class="task-board container-fluid">
  <div class="board-header">
    <h2>Quadro de Tarefas (Drag and Drop)</h2>
    <button class="btn btn-primary" (click)="openCreateTaskModal()">Criar Tarefa</button>
  </div>

  <div class="board-columns">
    <section class="column pending-column">
      <header>
        <h3>A Fazer</h3>
        <span>{{ pendingTasks.length }} tarefa(s)</span>
      </header>

      <div class="task-list">
        <article
          class="task-card"
          *ngFor="let tarefa of pendingTasks"
          draggable="true"
          (dragstart)="onDragStart(tarefa.taskId)"
          (dragend)="clearDraggingTask()"
        >
          <p class="task-id">#{{ tarefa.taskId }}</p>
          <h5>{{ tarefa.taskTitle }}</h5>
          <p><strong>Descrição:</strong> {{ tarefa.taskDescription }}</p>
          <p><strong>Categoria:</strong> {{ tarefa.categoryName }}</p>

          <div class="button-group">
            <button class="btn btn-danger" (click)="openConfirmationModal(tarefa.taskId)">Deletar</button>
            <button class="btn btn-warning" (click)="openUpdateTaskModal(tarefa.taskId)">Editar</button>
          </div>
        </article>
      </div>
    </section>

    <section
      class="column done-column"
      (dragover)="$event.preventDefault()"
      (drop)="onDropDone()"
    >
      <header>
        <h3>Concluídas</h3>
        <span>Arraste a tarefa aqui para concluir</span>
      </header>

      <div class="drop-zone" [class.active-drop]="draggingTaskId !== null">
        <p *ngIf="doneTasks.length === 0" class="drop-zone-text">
          Solte aqui uma tarefa para marcar como feita.
        </p>

        <article class="task-card done" *ngFor="let tarefa of doneTasks">
          <p class="task-id">#{{ tarefa.taskId }}</p>
          <h5>{{ tarefa.taskTitle }}</h5>
          <p><strong>Descrição:</strong> {{ tarefa.taskDescription }}</p>
          <p><strong>Categoria:</strong> {{ tarefa.categoryName }}</p>

          <div class="button-group">
            <button class="btn btn-danger" (click)="openConfirmationModal(tarefa.taskId)">Deletar</button>
          </div>
        </article>
      </div>
    </section>
  </div>
</div>
