<div class="task-board container-fluid">
  <div class="board-header">
    <h1 class="board-title">Quadro de Tarefas</h1>
    <button type="button" class="btn btn-primary btn-new" (click)="openCreateTaskModal()">
      <span class="btn-icon">+</span> Nova tarefa
    </button>
  </div>

  <div class="board-columns">
    <section class="column column-pending">
      <header class="column-header">
        <h2 class="column-title">A Fazer</h2>
        <span class="column-count">{{ pendingTasks.length }} tarefa(s)</span>
      </header>
      <div
        class="column-drop"
        cdkDropList
        id="pendingList"
        [cdkDropListConnectedTo]="['doneList']"
        [cdkDropListData]="pendingTasks"
        (cdkDropListDropped)="onDrop($event)"
      >
        <article class="card card-pending" *ngFor="let tarefa of pendingTasks" cdkDrag [cdkDragData]="tarefa">
          <div class="card-handle" cdkDragHandle>
            <div class="card-top">
              <span class="card-id">#{{ tarefa.taskId }}</span>
            </div>
            <h3 class="card-title">{{ tarefa.taskTitle }}</h3>
            <p class="card-description" *ngIf="tarefa.taskDescription">{{ tarefa.taskDescription }}</p>
            <div class="card-meta">
              <span class="card-tag" *ngIf="tarefa.categoryName">{{ tarefa.categoryName }}</span>
            </div>
          </div>
          <div class="card-actions">
            <button type="button" class="card-action card-action-edit" (click)="openUpdateTaskModal(tarefa.taskId)" title="Editar">Editar</button>
            <button type="button" class="card-action card-action-delete" (click)="openConfirmationModal(tarefa.taskId)" title="Deletar">Deletar</button>
          </div>
        </article>
        <p *ngIf="pendingTasks.length === 0" class="column-empty">Nenhuma tarefa. Arraste itens aqui ou crie uma nova.</p>
      </div>
    </section>

    <section class="column column-done">
      <header class="column-header">
        <h2 class="column-title">Concluídas</h2>
        <span class="column-count">{{ doneTasks.length }} tarefa(s)</span>
      </header>
      <div
        class="column-drop"
        cdkDropList
        id="doneList"
        [cdkDropListConnectedTo]="['pendingList']"
        [cdkDropListData]="doneTasks"
        (cdkDropListDropped)="onDrop($event)"
      >
        <article class="card card-done" *ngFor="let tarefa of doneTasks" cdkDrag [cdkDragData]="tarefa">
          <div class="card-handle" cdkDragHandle>
            <div class="card-top">
              <span class="card-id">#{{ tarefa.taskId }}</span>
            </div>
            <h3 class="card-title">{{ tarefa.taskTitle }}</h3>
            <p class="card-description" *ngIf="tarefa.taskDescription">{{ tarefa.taskDescription }}</p>
            <div class="card-meta">
              <span class="card-tag card-tag-done" *ngIf="tarefa.categoryName">{{ tarefa.categoryName }}</span>
            </div>
          </div>
          <div class="card-actions">
            <button type="button" class="card-action card-action-delete" (click)="openConfirmationModal(tarefa.taskId)" title="Deletar">Deletar</button>
          </div>
        </article>
        <p *ngIf="doneTasks.length === 0" class="column-empty">Arraste uma tarefa aqui para marcar como concluída.</p>
      </div>
    </section>
  </div>
</div>
